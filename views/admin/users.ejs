<!DOCTYPE html>
<html>
<head>
  <title>Administration - Gestion des utilisateurs</title>
  <link rel='stylesheet' href='/stylesheets/style.css'/>
  <link rel='stylesheet' href='/stylesheets/bootstrap.css'/>
  <link rel='stylesheet' href='/stylesheets/bootstrap-theme.css'/>
  <link rel='stylesheet' href='/stylesheets/jquery.minipreview.css'/>
  <link rel='stylesheet' href='/stylesheets/jquery-ui.css'/>
</head>
<body>

<nav class="navbar navbar-default">
  <div class="container-fluid">
    <a class="navbar-brand" href="#">Gestion des utilisateurs</a>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li><a href="/admin">Retour à l'accueil de la partie administration</a></li>
      </ul>
    </div>
    <!-- /.navbar-collapse -->
  </div>
  <!-- /.container-fluid -->
</nav>
<div class="table-responsive">
  <table class="table table-striped  table-hover table-condensed">
    <thead>
    <tr>
      <th width="20%">E-mail</th>
      <th width="20%">Nom</th>
      <th width="20%">Abonné ?</th>
      <th width="20%">Avatar</th>
    </tr>
    </thead>
  </table>
  <div class="bodycontainer scrollable">
    <table class="table table-hover table-striped table-condensed table-scrollable">
      <tbody>
      <% users.forEach(function(user) { %>
      <tr id="<%= user.id %>Row">
        <td width="20%">
          <button class="userEditButton" type="button" class="btn btn-default btn-xs" title="Modifier">
            <span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
          </button>&nbsp;&nbsp;<%= user.id %>
        </td>
        <td width="21%"><%= user.name %></td>
        <td width="20%"><input type="checkbox" <%= user.hasSubscribe ? 'checked' : '' %> disabled/></td>
        <td width="20%">
          <button class="avatarChangeButton" type="button" class="btn btn-default btn-xs" title="Changer l'image">
            <span class="glyphicon glyphicon-upload" aria-hidden="true"></span>
          </button>
          <a class="userThumbnail" data-toggle="popover" data-placement="left" data-img="<%= user.avatar %>" title="Aperçu"><%= user.avatar %></a>
        </td>
      </tr>
      <tr class="userEditForm" id="<%= user.id %>Form">
        <td width="19%">
          <button class="userEditCancelButton" type="button" class="btn btn-default btn-xs" title="Annuler">
            <span class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span>
          </button>&nbsp;
          <button class="userEditSaveButton" type="button" class="btn btn-default btn-xs" title="Sauver">
            <span class="glyphicon glyphicon-save" aria-hidden="true"></span>
          </button>&nbsp;&nbsp;<%= user.id %></td>
        <td width="21%"><input id="name" type="text" value="<%= user.name %>"/></td>
        <td width="20%"><input id="hasSubscribe" type="checkbox" <%= user.hasSubscribe ? 'checked' : '' %> /></td>
        <td width="20%"><%= user.avatar %></td>
      </tr>
      <% }) %>

      </tbody>

    </table>
  </div>
  <table class="table table-hover table-striped table-condensed">
    <tfoot>
    <tr>
      <td width="21%"><input id="newUserId" type="text"/></td>
      <td width="20%"><input id="newUserName" type="text"/></td>
      <td width="20%"><input id="newUserHasSubscribe" type="checkbox"/></td>
      <td width="20%">
        <button id="addUserButton" type="button" class="btn btn-info">Ajouter</button>
      </td>
    </tr>
    </tfoot>
  </table>
</div>
</form>
<div id="dialog-avatar-form" title="Uploader une image">
  <form enctype="multipart/form-data">
    <fieldset>
      <label for="file">Image (.jpg uniquement)</label>
      <input type="file" name="file" id="avatarFile" accept=".jpg, .jpeg" class="text ui-widget-content ui-corner-all">
      <input type="submit" tabindex="-1" style="position:absolute; top:-1000px">
    </fieldset>
  </form>
  <style>
    .ui-dialog-titlebar-close {
      display: none !important;
    }
  </style>
</div>
<script src="/js/jquery.js"></script>
<script src="/js/jquery-ui.js"></script>
<script src="/js/jquery.minipreview.js"></script>
<script src="/js/bootstrap.js"></script>
<script src="/js/source.js"></script>
</body>
</html>